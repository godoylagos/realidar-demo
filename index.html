<!DOCTYPE html>
<html>
  <head>
    <title>REALIDAR</title>
    <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.4/dist/mindar-face-three.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.4/dist/mindar-image-three.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.4/dist/mindar-ground-three.prod.js"></script>
    <style>
      body {{ margin: 0; overflow: hidden; background-color: black; font-family: sans-serif; }}
      #start-screen {{ position: absolute; width: 100vw; height: 100vh; background: black; color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1; }}
      #start-button {{ padding: 10px 20px; font-size: 16px; background: limegreen; border: none; cursor: pointer; }}
      #place-button {{ display: none; position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); z-index: 2; background: limegreen; padding: 10px 20px; font-size: 16px; border: none; cursor: pointer; }}
      #info-text {{ position: absolute; top: 20px; width: 100%; text-align: center; color: white; font-size: 14px; z-index: 2; }}
    </style>
  </head>
  <body>
    <div id="start-screen">
      <h2>REALIDAR</h2>
      <p>Estás a punto de vivir tu logo en realidad aumentada.<br>Busca una superficie plana y presiona comenzar.</p>
      <button id="start-button">Comenzar</button>
    </div>
    <div id="info-text">Mueve tu celular hasta encontrar una superficie plana</div>
    <button id="place-button">Colocar aquí</button>
    <script type="module">
      import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.module.js';
      import {{ MindARThree }} from 'https://cdn.jsdelivr.net/npm/mind-ar@1.1.4/dist/mindar-ground-three.prod.js';

      const startButton = document.getElementById('start-button');
      const startScreen = document.getElementById('start-screen');
      const placeButton = document.getElementById('place-button');
      const infoText = document.getElementById('info-text');

      startButton.addEventListener('click', async () => {{
        startScreen.style.display = 'none';
        const mindarThree = new MindARThree({{ container: document.body, showStats: false, showPlanes: true }});
        const { renderer, scene, camera } = mindarThree;
        const anchor = mindarThree.addAnchor(0);

        const light = new THREE.HemisphereLight(0xffffff, 0xbbbbff, 1);
        scene.add(light);

        const loader = new THREE.GLTFLoader();
        let logoObject = null;

        loader.load('logo.glb', (gltf) => {{
          logoObject = gltf.scene;
          logoObject.visible = false;
          logoObject.scale.set(0.5, 0.5, 0.5);
          scene.add(logoObject);
        }});

        await mindarThree.start();

        renderer.setAnimationLoop(() => {{
          renderer.render(scene, camera);
        }});

        anchor.onTargetFound = () => {{
          placeButton.style.display = 'block';
        }};

        placeButton.addEventListener('click', () => {{
          if (logoObject) {{
            logoObject.position.copy(anchor.group.position);
            logoObject.quaternion.copy(anchor.group.quaternion);
            logoObject.visible = true;
          }}
          placeButton.style.display = 'none';
          infoText.style.display = 'none';
        }});
      }});
    </script>
  </body>
</html>
